<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta http-equiv="X-UA-Compatible" content="ie=edge" />
  <meta name="description" content="TaskEnvironmentalService">
  <link href="assets/images/favicon/favicon.svg" rel="icon">
  <title>Taskservices.co.mz</title>
  <link rel="stylesheet"
    href="https://fonts.googleapis.com/css?family=Rubik:400,500,600,700%7cRoboto:400,500,700&display=swap">
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.3/css/all.css">
  <link rel="stylesheet" href="assets/css/libraries.css">
  <link rel="stylesheet" href="assets/css/style.css">
  <!-- jsPDF versão clássica e mais compatível -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.3.1/jspdf.min.js"></script>

</head>

<body>
  <div class="wrapper">
    <div class="preloader">
      <div class="loading"></div>
      <img src="assets/images/loading-animation.gif" class="spinner" alt="Carregando" />
    </div><!-- /.preloader -->

    <!-- =========================
        Header
    =========================== -->
    <header class="header header-layout1">
      <div class="header-topbar">
        <div class="container-fluid">
          <div class="row align-items-center">
            <div class="col-12">
              <div class="d-flex align-items-center justify-content-between">
                <ul class="contact__list d-flex flex-wrap align-items-center list-unstyled mb-0">
                  <li>
                    <i class="icon-mail"></i>
                    <a href="mailto:clients@taskservices.co.mz?subject=Contacto via Site Task Environmental&body=Olá Task Environmental,%0D%0A%0D%0AGostaria de ter mais informações sobre os vossos serviços:" class="email-link">Email: clients@taskservices.co.mz</a>
                  </li>
                  <li>
                    <i class="icon-clock"></i>
                    <a href="tel:+258877337315">+258877337315</a>
                  </li>
                  <li>
                    <i class="icon-location color-primary"></i>
                    <a href="#" class="color-primary">Veja Onde estamos</a>
                  </li>
                </ul><!-- /.contact__list -->
                <div class="d-flex align-items-center">
                  <form class="header-topbar__search mr-20">
                    <input type="text" class="form-control" placeholder="Faça a sua pesquisa...">
                    <button class="header-topbar__search-btn"><i class="fa fa-search"></i></button>
                  </form>
                  <ul class="social-icons list-unstyled mb-0 mr-20">
                    <li><a href="https://www.facebook.com/taskservices.moz" target="_blank" class="social-link"><i class="fab fa-facebook-f"></i></a></li>
                    <li><a href="https://www.instagram.com/taskservices.moz" target="_blank" class="social-link"><i class="fab fa-instagram"></i></a></li>
                    <li><a href="https://www.linkedin.com/taskservices.moz" target="_blank" class="social-link"><i class="fab fa-linkedin"></i></a></li>
                  </ul><!-- /.social-icons -->
                  <div class="dropdown lang-dropdown">
                    <button class="dropdown-toggle lang-dropdown-toggle" id="langDropdown" data-toggle="dropdown">
                      <img src="assets/images/flags/pt.png" alt="Pt"> <span>Português</span>
                    </button>
                    <div class="dropdown-menu" aria-labelledby="langDropdown">
                      <a class="dropdown-item" href="#">
                        <img src="assets/images/flags/en.png" alt="en"> <span>Inglês</span>
                      </a>
                    </div>
                  </div>
                </div>
              </div>
            </div><!-- /.col-12 -->
          </div><!-- /.row -->
        </div><!-- /.container -->
      </div><!-- /.header-top -->
      <nav class="navbar navbar-expand-lg sticky-navbar">
        <div class="container-fluid">
          <a class="navbar-brand" href="index.html">
            <img src="assets/images/logo/Task logo.svg" class="logo" alt="logo">
          </a>
          <button class="navbar-toggler" type="button">
            <span class="menu-lines"><span></span></span>
          </button>
          <div class="collapse navbar-collapse" id="mainNavigation">
            <ul class="navbar-nav">
              <li class="nav__item has-dropdown">
                <a href="index.html" class="nav__item-link">Início</a>
              </li><!-- /.nav-item -->
              <li class="nav__item has-dropdown">
                <a href="about-us.html" class="nav__item-link">Empresa</a>
                <button class="dropdown-toggle" data-toggle="dropdown"></button>
                <ul class="dropdown-menu">
                  <li class="nav__item">
                    <a href="about-us.html" class="nav__item-link">Sobre Nós</a>
                  </li><!-- /.nav-item -->
                  <li class="nav__item">
                    <a href="team.html" class="nav__item-link">Nossa Team</a>
                  </li><!-- /.nav-item -->
                  <li class="nav__item">
                    <a href="pricing.html" class="nav__item-link">Preços & Planos</a>
                  </li><!-- /.nav-item -->
                  <li class="nav__item">
                    <a href="faqs.html" class="nav__item-link">Dúvidas & Ajuda</a>
                  </li> <!-- /.nav-item -->
                  <li class="nav__item">
                    <a href="gallery.html" class="nav__item-link">Galeria</a>
                  </li><!-- /.nav-item -->
                </ul><!-- /.dropdown-menu -->
              </li><!-- /.nav-item -->
              <li class="nav__item has-dropdown">
                <a href="services.html" class="nav__item-link">Serviços</a>
                <button class="dropdown-toggle" data-toggle="dropdown"></button>
                <ul class="dropdown-menu">
                  <li class="nav__item"><a href="lixo.html" class="nav__item-link">Recolha Esporádica de Lixo</a></li>
                  <!-- /.nav-item -->
                  <li class="nav__item"><a href="banheiros.html" class="nav__item-link">Venda & Aluguer de Banheiros Móveis</a></li>
                  <!-- /.nav-item -->
                  <li class="nav__item"><a href="baldes.html" class="nav__item-link">Venda & Aluguer de Baldes de Lixo</a></li>
                  <!-- /.nav-item -->
                  <li class="nav__item"><a href="residuos.html" class="nav__item-link">Gestão de Resíduos Perigososs</a></li>
                  <!-- /.nav-item -->
                  <li class="nav__item"><a href="fossaseedificios.html" class="nav__item-link">Limpeza de Fossas & Edifícios</a>
                  </li>
                  <!-- /.nav-item -->
                  <li class="nav__item"><a href="lixoplanificado.html" class="nav__item-link">Recolha de Lixo Planificada</a>
                  </li>
                  <!-- /.nav-item -->
                </ul><!-- /.dropdown-menu -->
              </li><!-- /.nav-item -->
              <li class="nav__item has-dropdown">
                <a href="projects-grid.html" class="nav__item-link">Projectos</a>
                <button class="dropdown-toggle" data-toggle="dropdown"></button>
                <ul class="dropdown-menu">
                  <li class="nav__item"><a href="projects-grid.html" class="nav__item-link">Acção Social</a></li>
                  <!-- /.nav-item -->
                </ul><!-- /.dropdown-menu -->
              </li><!-- /.nav-item -->
              <li class="nav__item has-dropdown">
                <a href="blog.html" class="nav__item-link">Novidades</a>
                <button class="dropdown-toggle" data-toggle="dropdown"></button>
                <ul class="dropdown-menu">
                  <li class="nav__item">
                    <a href="blog.html" class="nav__item-link">Blog</a>
                  </li><!-- /.nav-item -->
                </ul><!-- /.dropdown-menu -->
              </li><!-- /.nav-item -->
              <li class="nav__item">
                <a href="contact-us.html" class="nav__item-link">Contactos</a>
              </li><!-- /.nav-item -->
            </ul><!-- /.navbar-nav -->
            <button class="close-mobile-menu d-block d-lg-none"><i class="fas fa-times"></i></button>
          </div><!-- /.navbar-collapse -->
          <div class="contact__number d-none d-xl-flex align-items-center">
            <i class="icon-phone"></i>
            <a href="tel:+258877337315">+258877337315</a>
          </div>
          <ul class="navbar-actions d-none d-xl-flex align-items-center list-unstyled mb-0">
            <li>
              <a href="request-quote.html" class="btn btn__primary">
                <span>PEDIR COTAÇÃO</span>
                <i class="icon-arrow-right"></i>
              </a>
            </li>
          </ul><!-- /.navbar-actions -->
        </div><!-- /.container -->
      </nav><!-- /.navabr -->
    </header><!-- /.Header -->

    <!-- ========================
       page title 
    =========================== -->
    <section class="page-title page-title-layout1 bg-overlay bg-overlay-2 bg-parallax text-center">
      <div class="bg-img"><img src="assets/images/page-titles/14.jpg" alt="background"></div>
      <div class="container">
        <div class="row">
          <div class="col-12">
            <h1 class="pagetitle__heading mb-0">PEDIR COTAÇÃO</h1>
            <nav aria-label="breadcrumb">
              <ol class="breadcrumb justify-content-center">
                <li class="breadcrumb-item"><a href="#">Início</a></li>
                <li class="breadcrumb-item active" aria-current="page">PEDIR COTAÇÃO</li>
              </ol>
            </nav>
            <a href="#contact" class="scroll-down">
              <i class="icon-arrow-down"></i>
            </a>
          </div><!-- /.col-xl-6 -->
        </div><!-- /.row -->
      </div><!-- /.container -->
    </section><!-- /.page-title --><br>

    <br><br>

    <!-- =========================== 
  Contact Layout 2 Melhorado
============================= -->
<section class="contact-layout2 pb-0 bg-overlay bg-overlay-primary-gradient">
  <div class="bg-img"><img src="assets/images/banners/2.jpg" alt=""></div>
  <div class="container">
    <div class="row align-items-center">
      
      <!-- COLUNA ESQUERDA: Texto + Ícones -->
      <div class="col-xl-6 col-lg-12 mb-5 mb-xl-0">
        <div class="col-inner text-white">
          <div class="heading-layout2 heading-light mb-40">
            <h2 class="heading__subtitle">Garanta que o seu lixo esteja no lugar certo!</h2>
            <h3 class="heading__title">ENCONTRE O SERVIÇO CERTO PARA A SUA NECESSIDADE.</h3>
            <p class="heading__desc">
              Com os nossos serviços, garantimos que você receba mais do que você paga, isto é, o seu acto de pagar não é um gasto, mas sim um investimento para o ambiente em que vives ou trabalhas.
            </p>
          </div>

          <div class="row fancybox-light">
            <div class="col-sm-4">
              <div class="fancybox-item">
                <div class="fancybox__icon">
                  <img src="assets/images/icons/ambiente saudavel.svg" alt="Ambiente Saudável" width="90" height="90">
                </div>
                <div class="fancybox__content">
                  <h4 class="fancybox__title mb-0">Ambiente Saudável</h4>
                </div>
              </div>
            </div>

            <div class="col-sm-4">
              <div class="fancybox-item">
                <div class="fancybox__icon">
                  <img src="assets/images/icons/confiança.svg" alt="Transparência & Confiança" width="90" height="90">
                </div>
                <div class="fancybox__content">
                  <h4 class="fancybox__title mb-0">Transparência & Confiança</h4>
                </div>
              </div>
            </div>

            <div class="col-sm-4">
              <div class="fancybox-item">
                <div class="fancybox__icon">
                  <img src="assets/images/icons/tempo economizado.svg" alt="Tempo Economizado" width="90" height="90">
                </div>
                <div class="fancybox__content">
                  <h4 class="fancybox__title mb-0">Tempo Economizado</h4>
                </div>
              </div>
            </div>
          </div><!-- /.row -->
        </div><!-- /.col-inner -->
      </div><!-- /.col-xl-6 -->

      <!-- COLUNA DIREITA: Formulário -->
      <div class="col-xl-6 col-lg-12">
        <div class="contact-panel">
   <form class="contact-panel__form" id="contactForm" novalidate>
            <div class="row">
              <div class="col-12">
                <h4 class="contact-panel__title">PEDIR COTAÇÃO SEM COMPROMISSO</h4>
              </div>

              <div class="col-sm-6">
                <div class="form-group">
                  <input type="text" class="form-control" id="contact-name" placeholder="Nome Completo*" name="nome" required>
                </div>
              </div>

              <div class="col-sm-6">
                <div class="form-group">
                  <input type="email" id="contact-email"id="contact-email" class="form-control" placeholder="Email" name="email">
                </div>
              </div>

              <div class="col-sm-6">
                <div class="form-group">
                  <input type="tel" class="form-control" id="contact-Phone" placeholder="Telefone / WhatsApp*" name="telefone" required>
                </div>
              </div>

              <div class="col-sm-6">
                <div class="form-group">
                  <input type="text" class="form-control" id="contact-address" placeholder="Localização*" name="localizacao" required>
                </div>
              </div>

              <div class="col-12">
  <label class="font-weight-bold mb-2 d-block">Serviços desejados *</label>
  <div id="servicosContainer">
    <div class="form-row mb-2 servico-item">
      <div class="col-md-6">
        <select class="form-control" name="tipoServico[]" required>
          <option value="">-- Tipo de Serviço --</option>
          <option value="Residencial">Recolha em Residências</option>
          <option value="Condominio">Recolha em Condomínios</option>
          <option value="Empresa">Recolha em Empresas</option>
          <option value="Residuos Perigosos">Resíduos Perigosos</option>
          <option value="Banheiros Moveis">Banheiros Móveis</option>
          <option value="Contentores">Baldes de Lixo</option>
          <option value="Fossas">Limpeza de Fossas</option>
          <option value="Pos Obra">Limpeza Pós-Obra</option>
        </select>
      </div>
      <div class="col-md-4">
        <select class="form-control" name="planoServico[]">
          <option value="" id="select:nth-of-type(1)">-- Plano --</option>
          <option value="Básico" id="select:nth-of-type(2)">Básico</option>
          <option value="Standard" id="select:nth-of-type(3)">Standard</option>
          <option value="Premium" id="select:nth-of-type(4)">Premium</option>
          <option value="Sob Cotação" id="select:nth-of-type(5)">Sob Consulta</option>
        </select>
      </div>

      <div class="col-md-4 capacidade-servico-container" style="display: none;">
                <select class="form-control" name="capacidade[]">
                  <option value="">-- Capacidade --</option>
                  <option value="70 litros">500ml</option>
                  <option value="400 litros">600ml</option>
                </select>
        </div>

    <div class="col-md-2">
        <button type="button" class="btn btn-sm btn-danger removeServico">X Remover serviço</button>
      </div>
  
    </div>
  </div>
  <button type="button" class="btn btn-sm btn-primary mt-2" id="addServico">+ Adicionar mais Serviços</button>
</div>

              <div class="col-12">
                <div class="form-group">
                  <textarea class="form-control" name="detalhes" rows="4" placeholder="Observações / Especificações"></textarea>
                </div>
              </div>

              <!-- Resumo da Cotação -->
              <div class="col-12">
                <div class="quote-summary bg-light p-3 mt-3 mb-3">
                  <h5>Resumo da Cotação</h5>
                  <div id="quoteDetails"></div>
                  <div class="total-price mt-2">
                    <strong>Total Estimado: <span id="totalPrice">MT 0</span></strong>
                  </div>
                </div>
              </div>
              
              <div class="col-12">
                <span class="font-weight-bold color-heading d-block mb-15 mt-10">Contacto Preferido</span>
                <div class="d-flex">
                  <div class="form-group input-radio mr-30">
                    <label class="label-radio">Todos
                      <input type="radio" name="contact" checked>
                      <span class="radio-indicator"></span>
                    </label>
                  </div>
                  <div class="form-group input-radio mr-30">
                    <label class="label-radio">Email
                      <input type="radio" name="contact">
                      <span class="radio-indicator"></span>
                    </label>
                  </div>
                  <div class="form-group input-radio">
                    <label class="label-radio">Telefone
                      <input type="radio" name="contact">
                      <span class="radio-indicator"></span>
                    </label>
                  </div>
                </div>
              </div>

              <div class="col-12">
                 <button type="submit" class="btn btn__secondary btn__block">
    <i class="icon-arrow-right"></i> <span>SUBMETER</span>
  </button>
              </div>
            </div>
          </form>
        </div><!-- /.contact-panel -->
      </div><!-- /.col-xl-6 -->

    </div><!-- /.row -->
  </div><!-- /.container -->
</section><!-- /.contact-layout2 -->

 

    <!-- =====================
         Clients
      ======================== -->
    <section class="clients clients-layout2 border-bottom py-0">
      <div class="container">
        <div class="row align-items-center">
          <div class="col-sm-12 col-md-12 col-lg-6">
            <div class="slick-carousel"
              data-slick='{"slidesToShow": 3, "arrows": false, "dots": false, "autoplay": true,"autoplaySpeed": 2000, "infinite": true, "responsive": [ {"breakpoint": 992, "settings": {"slidesToShow": 3}}, {"breakpoint": 767, "settings": {"slidesToShow": 3}}, {"breakpoint": 480, "settings": {"slidesToShow": 2}}]}'>
              <div class="client">
                <a href="#"><img src="assets/images/clients/1.png" alt="client"></a>
              </div><!-- /.client -->
              <div class="client">
                <a href="#"><img src="assets/images/clients/2.png" alt="client"></a>
              </div><!-- /.client -->
              <div class="client">
                <a href="#"><img src="assets/images/clients/3.png" alt="client"></a>
              </div><!-- /.client -->
              <div class="client">
                <a href="#"><img src="assets/images/clients/4.png" alt="client"></a>
              </div><!-- /.client -->
              <div class="client">
                <a href="#"><img src="assets/images/clients/5.png" alt="client"></a>
              </div><!-- /.client -->
              <div class="client">
                <a href="#"><img src="assets/images/clients/6.png" alt="client"></a>
              </div><!-- /.client -->
              <div class="client">
                <a href="#"><img src="assets/images/clients/3.png" alt="client"></a>
              </div><!-- /.client -->
              <div class="client">
                <a href="#"><img src="assets/images/clients/4.png" alt="client"></a>
              </div><!-- /.client -->
            </div><!-- /.carousel -->
          </div><!-- /.col-lg-6 -->
          <div class="col-sm-12 col-md-12 col-lg-6">
            <strong class="text-center d-block mt-40">Receba uma Cotação precisa em até 2 a 5 dias após preencher o formulário nesta página. Ou ligue para nós:
              <a href="https://wa.me/+258877337315" class="text-underlined-primary">+258877337315</a>
            </strong>
          </div><!-- /.col-lg-6 -->
        </div><!-- /.row -->
      </div><!-- /.container -->
    </section><!-- /.clients -->

    
    <!-- ========================
      Footer
    ========================== -->
    <footer class="footer">
      <div class="footer-primary">
        <div class="container">
          <div class="row">
            <div class="col-sm-12 col-md-6 col-lg-4 col-xl-3 footer-widget footer-widget-contact">
              <h6 class="footer-widget-title">Contacto Rápido</h6>
              <div class="footer-widget-content">
                <p class="mb-20">Caso tenha alguma dúvida ou precise de ajuda, sinta-se à vontade para entrar em contato com nossa equipe.</p>
                <div class="contact__number d-flex align-items-center mb-30">
                  <i class="icon-phone"></i>
                  <a href="https://wa.me/+258877337315" class="color-primary">+258877337315</a>
                </div><!-- /.contact__numbr -->
                <p class="mb-20">Estamos em Moz: Bairro Malhangalene, Rua do trago, porta n° 16B r/c, Maputo, Mozambique 4345</p>
                <a href="#" class="btn__location">
                  <i class="icon-location"></i>
                  <span>Visite-nos</span>
                </a>
              </div><!-- /.footer-widget-content -->
            </div><!-- /.col-xl-3 -->
            <div class="col-6 col-sm-6 col-md-6 col-lg-2 col-xl-2 footer-widget footer-widget-nav">
              <h6 class="footer-widget-title">Empresa</h6>
              <div class="footer-widget-content">
                <nav>
                  <ul class="list-unstyled">
                    <li><a href="about-us.html">Sobre Nós</a></li>
                    <li><a href="team.html">Nossa Team</a></li>
                    <li><a href="faqs.html">Dúvidas</a></li>
                    <li><a href="pricing.html">Preços e Planos</a></li>
                    <li><a href="projects-grid.html">Nossos Projectos</a></li>
                    <li><a href="contact-us.html">Contactos</a></li>
                  </ul>
                </nav>
              </div><!-- /.footer-widget-content -->
            </div><!-- /.col-xl-2 -->
            <div class="col-6 col-sm-6 col-md-6 col-lg-2 col-xl-2 footer-widget footer-widget-nav">
              <h6 class="footer-widget-title">Serviços</h6>
              <div class="footer-widget-content">
                <nav>
                  <ul class="list-unstyled">
                    <li><a href="lixo.html">Recolha de Lixo</a></li>
                    <li><a href="banheiros.html">Banheiros Móveis</a></li>
                    <li><a href="baldes.html">Baldes de Lixo</a></li>
                    <li><a href="residuos.html">Resíduos Perigosos</a></li>
                    <li><a href="fossaseedificios.html">Limpeza de Fossas</a></li>
                    <li><a href="lixoplanificado.html">Recolha Planificada</a></li>
                  </ul>
                </nav>
              </div><!-- /.footer-widget-content -->
            </div><!-- /.col-xl-2 -->
            <div class="col-6 col-sm-6 col-md-6 col-lg-2 col-xl-2 footer-widget footer-widget-nav">
              <h6 class="footer-widget-title">Supporte</h6>
              <div class="footer-widget-content">
                <nav>
                  <ul class="list-unstyled">
                    <li><a href="terms.html">Termos & Condições</a></li>
                    <li><a href="privacy.html">Política de Privacidade</a></li>
                  </ul>
                </nav>
              </div><!-- /.footer-widget-content -->
            </div><!-- /.col-xl-2 -->
            <div class="col-sm-12 col-md-6 col-lg-4 col-xl-3 footer-widget footer-widget-align-right">
              <h6 class="footer-widget-title">Catálogo de Serviços</h6>
              <div class="footer-widget-content">
               <a href="#" id="btnBaixarPDF" class="btn btn__primary btn__primary-style2 btn__download mb-60">
               <i class="icon-download"></i>
              <span>Baixar PDF</span>
              </a>
              <!-- script de pdf-->
<!-- SweetAlert2 -->
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

<!-- jsPDF mais estável -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.3.1/jspdf.min.js"></script>

<!-- SweetAlert2 -->
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

<!-- jsPDF mais estável -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.3.1/jspdf.min.js"></script>
<script>
document.getElementById('btnBaixarPDF').addEventListener('click', function (e) {
  e.preventDefault();

  const form = document.getElementById('contactForm');
  const formData = new FormData(form);

  const nome = formData.get('nome')?.trim();
  const telefone = formData.get('telefone')?.trim();
  const localizacao = formData.get('localizacao')?.trim();
  const tiposServico = formData.getAll('tipoServico[]').filter(s => s.trim() !== "");

  if (!nome || !telefone || !localizacao || tiposServico.length === 0) {
    Swal.fire({
      icon: 'error',
      title: 'Campos obrigatórios em falta',
      html: `
        <p>Por favor, preencha os seguintes campos obrigatórios:</p>
        <ul style="text-align:left;">
          ${!nome ? '<li><strong>Nome Completo</strong></li>' : ''}
          ${!telefone ? '<li><strong>Telefone / WhatsApp</strong></li>' : ''}
          ${!localizacao ? '<li><strong>Localização</strong></li>' : ''}
          ${tiposServico.length === 0 ? '<li><strong>Serviços desejados</strong></li>' : ''}
        </ul>
      `,
      confirmButtonText: 'Ok, vou corrigir',
    });
    return;
  }

  const doc = new jsPDF();
  let y = 10;

  doc.setFontSize(14);
  doc.text("Resumo do Pedido de Cotação", 10, y);
  y += 10;

  for (let [key, value] of formData.entries()) {
    if (value && value.trim() !== "" && !key.includes('tipoServico') && !key.includes('planoServico')) {
      const input = form.querySelector(`[name="${key}"]`);
      const label = input?.placeholder || key;
      doc.text(`${label}: ${value}`, 10, y);
      y += 10;
    }
  }

  const planos = formData.getAll('planoServico[]');
  tiposServico.forEach((tipo, i) => {
    const plano = planos[i] || "Sem plano";
    doc.text(`Serviço ${i + 1}: ${tipo} - Plano: ${plano}`, 10, y);
    y += 10;
  });

  doc.save('cotacao.pdf');
});
</script>
<script>
document.addEventListener('DOMContentLoaded', function() {
  const planoData = JSON.parse(localStorage.getItem('planoSelecionado'));

  if (planoData) {
    const primeiroServico = document.querySelector('.servico-item');

    const servicoMap = {
      'Recolha de Lixo em Residências': 'Residencial',
      'Recolha de Lixo em Condomínios': 'Condominio',
      'Recolha de Lixo em Empresas': 'Empresa',
      'Residuos Perigosos': 'Residuos Perigosos',
      'Banheiros Moveis': 'Banheiros Moveis',
      'Contentores de Lixo': 'Contentores',
      'Limpeza de Fossas': 'Fossas',
      'Limpeza Pós-Obra': 'Pos Obra'
    };

    const servicoSelect = primeiroServico.querySelector('select[name="tipoServico[]"]');
    Array.from(servicoSelect.options).forEach(option => {
      if (option.value === servicoMap[planoData.servico]) {
        option.selected = true;
        servicoSelect.dispatchEvent(new Event('change'));
      }
    });

    setTimeout(() => {
      const planoSelect = primeiroServico.querySelector('select[name="planoServico[]"]');
      if (planoSelect) {
        Array.from(planoSelect.options).forEach(option => {
          if (option.textContent.trim() === planoData.plano.replace('PLANO ', '')) {
            option.selected = true;
          }
        });
      }
    }, 100);

    const quoteDetails = document.getElementById('quoteDetails');
    let detailsHTML = `
      <div class="servico-resumo mb-2 p-2 border-bottom">
        <p class="mb-1"><strong>Serviço:</strong> ${planoData.servico}</p>
        <p class="mb-1"><strong>Plano:</strong> ${planoData.plano}</p>
        <p class="mb-1"><strong>Preço:</strong> ${planoData.preco}</p>
        <p class="mb-1"><strong>Benefícios:</strong></p>
        <ul class="pl-3">`;

    planoData.beneficios.forEach(beneficio => {
      detailsHTML += `<li>${beneficio}</li>`;
    });

    detailsHTML += `</ul></div>`;
    quoteDetails.innerHTML = detailsHTML;

    const precoNumerico = parseFloat(planoData.preco.match(/[\d,.]+/)?.[0].replace('.', '').replace(',', '.') || 0);
    if (!isNaN(precoNumerico)) {
      document.getElementById('totalPrice').textContent = `MT ${precoNumerico.toLocaleString('pt-BR', {minimumFractionDigits: 2})}`;
    }

    setTimeout(() => {
      localStorage.removeItem('planoSelecionado');
    }, 30 * 60 * 1000);
  }

  document.getElementById('addServico').addEventListener('click', function () {
    const novoItem = document.querySelector('.servico-item').cloneNode(true);
    novoItem.querySelectorAll('select').forEach(select => select.selectedIndex = 0);
    novoItem.querySelector('.removeServico').addEventListener('click', function () {
      this.closest('.servico-item').remove();
      updateResumoCotacao();
    });
    document.getElementById('servicosContainer').appendChild(novoItem);
  });

  document.querySelectorAll('.removeServico').forEach(button => {
    button.addEventListener('click', function () {
      this.closest('.servico-item').remove();
      updateResumoCotacao();
    });
  });

  document.querySelectorAll('select[name="tipoServico[]"], select[name="planoServico[]"]').forEach(select => {
    select.addEventListener('change', updateResumoCotacao);
  });

  function updateResumoCotacao() {
  const quoteDetails = document.getElementById('quoteDetails');
  let detailsHTML = '';
  let total = 0;

  const servicosComPlano = {
    'Residencial': { 'Básico': 1999, 'Standard': 2999, 'Premium': 4999 },
    'Condominio': { 'Básico': 1200, 'Standard': 1000, 'Premium': 999 },
    'Empresa': { 'Básico': 9999, 'Standard': 15999, 'Premium': 20000 },
    'Contentores': { '400 litros': 1800, '70 litros': 900 }
  };

  const servicosSemPlano = {
    'Residuos Perigosos': 3000,
    'Banheiros Moveis': 4000,
    'Fossas': 4500,
    'Pos Obras': 8500
  };

  document.querySelectorAll('.servico-item').forEach((item) => {
    const tipo = item.querySelector('select[name="tipoServico[]"]').value;
    const planoSelect = item.querySelector('select[name="planoServico[]"]');
    const plano = planoSelect?.value || '';

    let preco = 0;
    let planoLabel = '';

    if (servicosComPlano[tipo]) {
      preco = servicosComPlano[tipo][plano] || 0;
      const planoTitulo = tipo === 'Contentores' ? 'Quantidade' : 'Plano';
      planoLabel = `<p class="mb-1"><strong>${planoTitulo}:</strong> ${plano}</p>`;
    } else if (servicosSemPlano[tipo]) {
      preco = servicosSemPlano[tipo];
      planoLabel = '';
      if (planoSelect) planoSelect.parentElement.style.display = 'none';
    }

    if (tipo && preco > 0) {
      total += preco;

      detailsHTML += `
        <div class="servico-resumo mb-2 p-2 border-bottom">
          <p class="mb-1"><strong>Serviço:</strong> ${tipo}</p>
          ${planoLabel}
          <p class="mb-1"><strong>Preço estimado:</strong> MT ${preco.toLocaleString('pt-BR', {minimumFractionDigits: 2})}</p>
        </div>`;
    }
  });

  quoteDetails.innerHTML = detailsHTML || '<p>Nenhum serviço selecionado</p>';
  document.getElementById('totalPrice').textContent = `MT ${total.toLocaleString('pt-BR', {minimumFractionDigits: 2})}`;
}


});
</script>

<script>
document.addEventListener('DOMContentLoaded', function () {
  const form = document.getElementById('contactForm');
  const submitBtn = form.querySelector('button[type="submit"]');

  form.addEventListener('submit', async function (e) {
    e.preventDefault();

    const nome = form.querySelector('[name="nome"]')?.value.trim();
    const telefone = form.querySelector('[name="telefone"]')?.value.trim();
    const localizacao = form.querySelector('[name="localizacao"]')?.value.trim();
    const servicos = Array.from(form.querySelectorAll('select[name="tipoServico[]"]'))
                          .filter(sel => sel.value.trim() !== "");

    if (!nome || !telefone || !localizacao || servicos.length === 0) {
      alert("Por favor preencha todos os campos obrigatórios: Nome, Telefone, Localização e pelo menos um Serviço.");
      return;
    }

    submitBtn.innerHTML = '<i class="icon-spinner spinner"></i> ENVIANDO...';
    submitBtn.disabled = true;

    try {
      const formData = new FormData(form);
      const data = {};

      formData.forEach((value, key) => {
        if (key.endsWith('[]')) {
          const realKey = key.replace('[]', '');
          data[realKey] = data[realKey] || [];
          data[realKey].push(value);
        } else {
          data[key] = value;
        }
      });
      const cotacaoPayload = {
  contato: {
    nome: data.nome,
    telefone: data.telefone,
    localizacao: data.localizacao,
    email: data.email
  },
  tipoServico: data.tipoServico || [],
  planoServico: data.planoServico || [],
  detalhes: data.detalhes || ''
};


      
      const planoData = JSON.parse(localStorage.getItem('planoSelecionado'));
      if (planoData) data.planoData = planoData;

     
      const response = await fetch('http://localhost:3000/api/cotacoes', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(cotacaoPayload)
      })

      if (!response.ok) {
        const error = await response.text();
        throw new Error(error.text || "Erro no servidor");
      }

      
      alert("Cotação enviada com sucesso! Você receberá um e-mail de confirmação.");
      form.reset();
      localStorage.removeItem('planoSelecionado');
      document.getElementById('quoteDetails').innerHTML = '';
      document.getElementById('totalPrice').textContent = 'MT 0';

    } catch (err) {
      alert("Erro ao enviar cotação: " + err.message);
      console.error("Erro detalhado:", err);
    } finally {
      submitBtn.innerHTML = '<i class="icon-arrow-right"></i> SUBMETER';
      submitBtn.disabled = false;
    }
  });
});
</script>

<script>
  document.addEventListener('DOMContentLoaded', function () {
    const usuario = JSON.parse(localStorage.getItem('usuarioLogado'));

    if (usuario) {
      if (document.getElementById('contact-name')) {
        document.getElementById('contact-name').value = usuario.nome || '';
      }
      if (document.getElementById('contact-email')) {
        document.getElementById('contact-email').value = usuario.email || '';
      }
      if (document.getElementById('contact-Phone')) {
        document.getElementById('contact-Phone').value = usuario.telefone || '';
      }
    }
  });
</script>



<style>
        .btn-sm {
          color: rgb(255, 255, 255);
          background:darkslategray;
        }
        .btn-sm:hover{
          color: rgb(255, 255, 255);
          background:chartreuse;
        }
      </style>

  
</body>
<script>
  function togglePlanoCapacidade(selectElem) {
  
    const servicoItem = selectElem.closest('.servico-item');
    if (!servicoItem) return;

  
    const planoContainer = servicoItem.querySelector('.plano-servico-container');
    const capacidadeContainer = servicoItem.querySelector('.capacidade-servico-container');

    if (selectElem.value === 'Contentores') {
      if(planoContainer) planoContainer.style.display = 'none';
      if(capacidadeContainer) capacidadeContainer.style.display = 'block';
    } else {
      if(planoContainer) planoContainer.style.display = 'block';
      if(capacidadeContainer) capacidadeContainer.style.display = 'none';
    }
  }


  document.getElementById('addServico').addEventListener('click', function() {
    const container = document.getElementById('servicosContainer');
    const lastServico = container.querySelector('.servico-item:last-child');
    if (!lastServico) return;
   
    const newServico = lastServico.cloneNode(true);

    const selects = newServico.querySelectorAll('select');
    selects.forEach(sel => {
      sel.value = '';
     
      if(sel.name === 'capacidade[]') {
        sel.parentElement.style.display = 'none';
      }
  
      if(sel.name === 'planoServico[]') {
        sel.parentElement.style.display = 'block';
      }
    });

    container.appendChild(newServico);
  });

  document.getElementById('servicosContainer').addEventListener('change', function(e){
    if(e.target && e.target.matches('select[name="tipoServico[]"]')){
      togglePlanoCapacidade(e.target);
    }
  });


  document.getElementById('servicosContainer').addEventListener('click', function(e){
    if(e.target && e.target.classList.contains('removeServico')){
      const servicoItem = e.target.closest('.servico-item');
      if(servicoItem){
        servicoItem.remove();
      }
    }
  });
</script>





</html>